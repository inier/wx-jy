{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./dev/game.ts","webpack:///./src/control.ts","webpack:///./src/descript.ts","webpack:///./src/gameOver.ts","webpack:///./src/index.ts","webpack:///./src/jy.ts","webpack:///./src/lib.ts","webpack:///./src/score.ts","webpack:///./src/sprite.ts","webpack:///./src/stage.ts","webpack:///./src/title.ts","webpack:///./src/writeText.ts"],"names":[],"mappings":"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","file":"game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./dev/game.ts\");\n","import {\r\n    JY,\r\n    Stage\r\n} from '../src/index';\r\nconst canvas = wx.createCanvas();\r\nconst [height,width]=[canvas.height,canvas.width]\r\n// console.log(canvas.height,canvas.width)\r\nconst context = canvas.getContext('2d');\r\n//创建舞台\r\nlet stage = new Stage(context, width,height,'#FFFFFF');\r\n\r\n\r\nclass Game extends JY{\r\n    running(){\r\n        console.log('my running')\r\n    }\r\n}\r\n\r\nnew Game(stage);","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen';\r\n//操作界面\r\nexport default class Control implements IScreen {\r\n    elem: HTMLElement;\r\n    rect: Array<number> = [160, 160];\r\n    moveElem: HTMLElement;\r\n    moveRect: Array<Number> = [50, 50];\r\n    moveCenter: Array<any>;\r\n    elemCenter: Array<any>;\r\n    elemPosition: Array<Number> = [10, 10];\r\n    position: Array<any>;\r\n    toPosition:Array<number>;\r\n    private angle:number=0;//角度\r\n\r\n    create() {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = \"control\";\r\n        this.elem.style.position = 'absolute';\r\n        this.elem.style.width = this.rect[0] + 'px';\r\n        this.elem.style.height = this.rect[1] + 'px';\r\n        this.elem.style.left = this.elemPosition[0] + '%';\r\n        this.elem.style.bottom = this.elemPosition[1] + '%';\r\n        this.moveElem = document.createElement('div');\r\n        this.moveElem.className = 'move';\r\n        this.moveElem.style.position = 'absolute';\r\n        this.moveElem.style.width = this.moveRect[0] + 'px';\r\n        this.moveElem.style.height = this.moveRect[1] + 'px';\r\n        this.elem.appendChild(this.moveElem);\r\n        this.moveCenter = this.moveRect.map(function (d: number) { return d / 2 });\r\n        this.elemCenter = this.rect.map(function (d: number) { return d / 2 });\r\n        this.resetPos();\r\n        this.bindEvent();\r\n        return this.elem;\r\n    }\r\n    resetPos() {\r\n        //重置位置\r\n        // console.log(this.moveCenter)\r\n        this.toPosition = [0, 0];\r\n        this.transPosition();\r\n    }\r\n    //传入圆心转换成坐标,\r\n    transPosition() {\r\n        let x = (this.elemCenter[0] - this.moveCenter[0]) + this.toPosition[0];\r\n        let y = (this.elemCenter[1] - this.moveCenter[1]) - this.toPosition[1];\r\n        this.moveElem.style.left = x + 'px';\r\n        this.moveElem.style.top = y + 'px';\r\n\r\n    }\r\n    bindEvent() {\r\n        this.elem.addEventListener('touchstart', function (event:TouchEvent) {\r\n            let epos = event.touches[0] || event;\r\n            this.setPosition(epos)\r\n        }.bind(this), false);\r\n        this.elem.addEventListener('touchmove', function (event:TouchEvent) {\r\n            let epos = event.touches[0] || event;\r\n            this.setPosition(epos);\r\n        }.bind(this), false);\r\n        this.elem.addEventListener('touchend', function (event:TouchEvent) {\r\n            this.resetPos();\r\n        }.bind(this), false);\r\n    }\r\n    // 计算边界值,设置位置\r\n    setPosition(epos:Touch) {\r\n        this.position =  [this.elem.offsetLeft, this.elem.offsetTop];\r\n        let x: number = epos.pageX - this.position[0];\r\n        let y = epos.pageY - this.position[1];\r\n        // x= Math.min (x,this.rect[0]-this.moveCenter[0]);\r\n        // x = Math.max(x,this.moveCenter[0])\r\n        let x1 = (x - this.elemCenter[0]);//相对于圆点的位置\r\n        let y1 = -(y - this.elemCenter[1]);\r\n        console.log(x1, y1)\r\n        let ang = Math.atan2(y1, x1);\r\n        // this.angle = ang;\r\n        // console.log('角度：'+ang)\r\n        let c = Math.sqrt(x1 * x1 + y1 * y1);\r\n        let r = this.elemCenter[0] - this.moveCenter[0];//最长半径\r\n        if (c > r) {\r\n            // console.log('out', c)\r\n            let x2 = Math.cos(ang) * r;\r\n            let y2 = Math.sin(ang) * r;\r\n            //下面是另一种算法\r\n            // y2=y1*r/c;\r\n            // x2= x1*r/c;\r\n            // console.log('xy:', x1, y1)\r\n            // console.log('x2y2:',x2, y2)\r\n            x1 = x2;\r\n            y1 = y2;\r\n        }\r\n        this.toPosition = [x1, y1];\r\n        this.transPosition()\r\n    }\r\n    getAngle(){\r\n        // console.log(this.toPosition)\r\n        this.angle = Math.atan2(this.toPosition[1],this.toPosition[0]);\r\n        return this.angle;\r\n    }\r\n    //获取到角度\r\n    remove() {\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\n//描述设计\r\nexport default class Descript  implements  IScreen{\r\n    elem: HTMLElement;\r\n    constructor(public btntitle:string,public text?:string) {\r\n        console.log(arguments)\r\n    }\r\n    create(callback:Function) {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = \"discript\";\r\n        this.elem.innerHTML = this.text||'';\r\n        this.elem.style.position= 'absolute';\r\n        let btn = document.createElement('button');\r\n        btn.className = 'button start';\r\n        btn.innerText = this.btntitle;\r\n        // btn.onclick = callback.bind(this);\r\n        btn.addEventListener('touchstart', function (event:TouchEvent) {\r\n            callback.call(this)\r\n        }.bind(this),false);\r\n        btn.addEventListener('click', function (event:TouchEvent) {\r\n            callback.call(this)\r\n        }.bind(this),false);\r\n        this.elem.appendChild(btn)\r\n        return this.elem;\r\n    }\r\n    remove(){\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class GameOver implements IScreen {\r\n    elem: HTMLElement;\r\n    textElem: HTMLElement;\r\n    constructor(public btntitle: string) {\r\n\r\n    }\r\n    create(callback?: Function, text: string = '') {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = 'gameOver';\r\n        this.textElem = document.createElement('div');\r\n        this.textElem.className = 'text';\r\n        this.textElem.innerHTML = text;\r\n        this.elem.appendChild(this.textElem);\r\n        let btn = document.createElement('button');\r\n        btn.className = \"button\"\r\n        btn.innerText = this.btntitle;\r\n        btn.addEventListener('touchstart', function (event:TouchEvent) {\r\n            callback.call(this)\r\n        }.bind(this),false);\r\n        // btn.onclick = callback.bind(this);\r\n        this.elem.appendChild(btn)\r\n        return this.elem;\r\n    }\r\n    setText(text: string = '') {\r\n        this.textElem.innerHTML = text;\r\n    }\r\n    remove() {\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n\r\n}","import JY from './jy';\r\nimport Control from './control';\r\nimport Descript from './descript';\r\nimport GameOver from './gameOver';\r\nimport IScreen from './iScreen';\r\nimport Score from './score';\r\nimport Sprite from './sprite';\r\nimport Stage from './stage';\r\nimport Title from './title';\r\nimport WriteText from './writeText';\r\nexport {\r\n    JY,\r\n    Control,\r\n    Descript,\r\n    GameOver,\r\n    IScreen,\r\n    Score,\r\n    Sprite,\r\n    Stage,\r\n    Title,\r\n    WriteText\r\n}","/*\r\n/// <reference path=\"sprite.ts\" />\r\n/// <reference path=\"title.ts\" />\r\n/// <reference path=\"descript.ts\" />\r\n/// <reference path=\"gameOver.ts\" />\r\n/// <reference path=\"stage.ts\" />\r\n/// <reference path=\"control.ts\" />\r\n/// <reference path=\"score.ts\" />\r\n/// <reference path=\"writeText.ts\" />\r\n*/\r\nimport Sprite,{SHAPE} from './sprite';\r\nimport Title from './title';\r\nimport Descript from './descript';\r\nimport GameOver from './gameOver';\r\nimport Stage from './stage';\r\nimport Control from './control';\r\nimport Score from './score';\r\nimport WriteText from './writeText';\r\nimport lib from './lib';\r\n\r\n\r\n//游戏主框架\r\nexport enum STATE {\r\n    loading,\r\n    title,\r\n    descript,\r\n    newGame,\r\n    running,\r\n    pause,\r\n    levelUp,\r\n    die,\r\n    gameOver\r\n}\r\nexport default class JY {\r\n    private func: Function = new Function;\r\n    private timer: any;\r\n    private aniId :number;\r\n    private currentState: STATE;\r\n    protected interval: number = 10;\r\n    protected context: wx.CanvasContext;\r\n    protected scoreScreen: Score;\r\n\r\n    files: any;\r\n    constructor( public stage: Stage, public titleStage?: Title, public descriptStage?: Descript, public gameOverStage?: GameOver, public controlStage?: Control) {\r\n        this.setup();\r\n    }\r\n    setup() {\r\n        this.freshFrame();\r\n        this.currentState = STATE.loading;\r\n        this.setState(STATE.loading);\r\n    }\r\n    // 实现游戏帧循环\r\n    freshFrame(){\r\n        // console.log(+new Date())\r\n        this.aniId = window.requestAnimationFrame(\r\n            this.freshFrame.bind(this)\r\n        )\r\n    }\r\n    run() {\r\n        console.log('run')\r\n        //this.func();\r\n        this.descriptStage.remove();\r\n        this.controlStage && this.createControl();\r\n        this.setState(STATE.newGame);\r\n    }\r\n    //分数面板\r\n    scoreInit() {\r\n        this.scoreScreen = new Score('--');\r\n        // this.view.appendChild(this.scoreScreen.create());\r\n    }\r\n    createControl() {\r\n        // this.view.appendChild(this.controlStage.create());\r\n    }\r\n    //新的开始\r\n    protected newGame() {\r\n        //游戏开始，清空场景\r\n        //打开计时器\r\n        this.scoreInit();\r\n        this.setState(STATE.running);\r\n        this.startTimer();\r\n    }\r\n    //结束 \r\n    protected over() {\r\n        this.setState(STATE.gameOver);\r\n    }\r\n    //暂停\r\n    protected pause() {\r\n        this.stopTimer();\r\n    }\r\n    //暂停后的继续\r\n    protected play() {\r\n        this.startTimer();\r\n    }\r\n    //游戏结束\r\n    protected gameOver() {\r\n        //游戏结束\r\n        //清空场景，显示结果\r\n        console.log('gameOver');\r\n        // this.scoreScreen.remove();\r\n        this.stage.clear();\r\n        this.controlStage && this.controlStage.remove();\r\n        this.stopTimer();\r\n        let gameOver = this.gameOverStage.create(function () {\r\n            this.gameOverStage.remove();\r\n            this.setState(STATE.descript);\r\n        }.bind(this));\r\n        // this.view.appendChild(gameOver);\r\n    }\r\n    //停止刷新\r\n    stopTimer() {\r\n        clearInterval(this.timer);\r\n    }\r\n    //刷新帧\r\n    startTimer() {\r\n        let _this = this;\r\n        this.timer = setInterval(function () {\r\n            _this.func.bind(_this)();\r\n        }, this.interval)\r\n    }\r\n    //游戏中的\r\n    running() {\r\n        // console.log('running...')\r\n        \r\n        this.context.clearRect(0, 0, this.stage.width, this.stage.height);\r\n    }\r\n    async loading(){\r\n        console.log('loading....')\r\n        await this.showLoading();\r\n        this.setState(STATE.title)\r\n    }\r\n    async showLoading(){\r\n        await lib.waitMoment(3000);\r\n    }\r\n    title(){\r\n\r\n    }\r\n    //检查状态\r\n    checkState() {\r\n        switch (this.currentState) {\r\n            case STATE.loading:\r\n                this.func = this.loading;\r\n                break;\r\n            case STATE.title:\r\n                this.func = this.title;\r\n                break;\r\n            case STATE.descript:\r\n                // this.func = this.descript;\r\n                break;\r\n            case STATE.newGame:\r\n                this.func = this.newGame;\r\n                break;\r\n            case STATE.running:\r\n                this.func = this.running;\r\n                break;\r\n            case STATE.gameOver:\r\n                this.func = this.gameOver;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    setState(state?: STATE) {\r\n        this.currentState = state;\r\n        this.checkState();\r\n        this.func();\r\n    }\r\n    //碰撞检测\r\n    hits(oA: Sprite, oB: Sprite) {\r\n        var bx = false,\r\n            by = false;\r\n        if (oA.shape == SHAPE.rect) {\r\n            var bw = oB.w;\r\n            var aw = oA.w;\r\n            var bh = oB.h;\r\n            var ah = oA.h;\r\n            if (oA.x > oB.x) {\r\n                bx = oA.x - oB.x < bw;\r\n            } else if (oA.x < oB.x) {\r\n                bx = oB.x - oA.x < aw;\r\n            } else {\r\n                bx = true;\r\n            };\r\n            if (oA.y > oB.y) {\r\n                by = oA.y - oB.y < bh;\r\n            } else if (oA.y < oB.y) {\r\n                by = oB.y - oA.y < ah;\r\n            } else {\r\n                by = true;\r\n            };\r\n            return (bx && by);\r\n        } else if (oA.shape == SHAPE.circle) {\r\n            var r2 = oA.r + oB.r;\r\n            let oAc = oA.getCenter();\r\n            let oBc = oB.getCenter();\r\n            bx = Math.abs(oAc[0] - oBc[0]) < r2;\r\n            by = Math.abs(oAc[1] - oBc[1]) < r2;\r\n            return (bx && by);\r\n        }\r\n    }\r\n}","export default {\r\n    /*\r\n    * 暂停一段时间\r\n    */\r\n   //暂停一段时间\r\n    async waitMoment(second:number){\r\n        let t = +new Date();\r\n        return new Promise(resolve=>{\r\n            let n = +new Date();\r\n            if(n - t >= second){\r\n                resolve();\r\n            }\r\n        })\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class Score implements IScreen {\r\n    elem: any;\r\n    right: string;\r\n    top: string;\r\n    constructor(public text?: string) {\r\n        console.log(arguments)\r\n    }\r\n    create(callback?: Function) {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = \"score\";\r\n        this.elem.innerHTML = this.text || '';\r\n        this.elem.style.position = 'absolute';\r\n        this.elem.style.right = this.right || '10px';\r\n        this.elem.style.top = this.top || '10px';\r\n        return this.elem;\r\n    }\r\n    change(text: string) {\r\n        this.text = text;\r\n        this.elem.innerHTML = this.text;\r\n    }\r\n    remove() {\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n}","//sprite\r\n//形状\r\nexport enum SHAPE{\r\n rect,\r\n circle\r\n}\r\nexport default class Sprite {\r\n    ///\r\n    context: any;//画布对象\r\n    x: number = 0;//x坐标\r\n    y: number = 0;//y坐标\r\n    w: number = 0;//宽度 \r\n    h: number = 0;//高度\r\n    sw: number = 0;//剪裁的宽\r\n    sh: number = 0;//前裁的高\r\n    sx: number = 0;//剪裁的x\r\n    sy: number = 0;//前裁的y\r\n    r:number = 0 ;//半径\r\n    img: any;//图像地址\r\n    shape:SHAPE = SHAPE.rect;//默认方形\r\n    constructor(context: any, url: string) {\r\n        this.getImg(url);\r\n        this.context = context;\r\n    }\r\n    setImg(url: string) {\r\n        this.getImg(url);\r\n    }\r\n    getImg(url: string): void {\r\n        //地址转换成img对象 \r\n        // this.img = new Image();\r\n        this.img.src = url;\r\n\r\n        // this.img = document.createElement('img');\r\n        // this.img.src = url;\r\n        // console.log(this.img.readyState)\r\n        // this.img.onreadystatechange=function(){\r\n        //     console.log(222,this.img.readyState)\r\n        // }\r\n        this.img.onload = function () {\r\n            console.log('loaded')\r\n        }\r\n        // this.img = document.createElement('img');\r\n        // this.img.src = url;\r\n    }\r\n    setSize(w?:number, h?:number) {\r\n        this.w = w||this.w;\r\n        this.h = h||this.h;\r\n        this.r = this.h/2;\r\n    }\r\n    getCenter(){\r\n        //圆心位置\r\n        return [this.x +this.r,this.y +this.r];\r\n    }\r\n    setCutSize(sw:number, sh:number) {\r\n        this.sw = sw;\r\n        this.sh = sh;\r\n    }\r\n    setPosition(x:number, y:number) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n    draw(angle?:number) {\r\n        this.context.save();\r\n        if(angle){\r\n            this.context.translate(this.x+this.r ,this.y+this.r)\r\n            this.context.rotate(angle);\r\n            this.context.translate(-(this.x+this.r) ,-(this.y+this.r));\r\n        } \r\n        if (this.sw && this.sh) {\r\n            this.context.drawImage(this.img, this.sx, this.sy, this.sw, this.sh, this.x, this.y, this.w, this.h);\r\n        } else {\r\n            //不需要剪切\r\n            this.context.drawImage(this.img,Math.round(this.x), Math.round(this.y), this.w, this.h);\r\n        }\r\n        // this.context.drawImage(this.img,10,10);\r\n        this.context.restore();\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class Stage {\r\n    elem: wx.CanvasContext;\r\n    constructor(public context:wx.CanvasContext, public width: number, public height: number, public style?: string) {\r\n        \r\n    }\r\n    draw(style?:string){\r\n        this.context.fillStyle=this.style;\r\n        this.context.fillRect(0,0,this.width,this.height)\r\n    }\r\n    clear(){\r\n        this.context.clearRect(0,0,this.width,this.height);\r\n    }\r\n    //绑定事件回调\r\n    bindEvent(callback?: Function) {\r\n      \r\n    }\r\n}\r\n","//描述设计\r\n//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class Title  implements  IScreen{\r\n    elem: HTMLElement;\r\n    constructor(public title:string) {\r\n        console.log(arguments)\r\n    }\r\n    create(callback:Function) {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = \"title\";\r\n        this.elem.style.position= 'absolute';\r\n        this.elem.innerHTML = this.title;\r\n        return this.elem;\r\n    }\r\n    remove(){\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n}","export default class WriteText{\r\n    context: CanvasRenderingContext2D;//画布对象\r\n    x: number = 0;//x坐标\r\n    y: number = 0;//y坐标\r\n    constructor(context:any){\r\n        this.context = context;\r\n    }\r\n    write(text:string,x:number,y:number,style:string='',fillStyle:string=''){\r\n        this.x= x;\r\n        this.y = y;\r\n        this.context.font=style;\r\n        this.context.fillStyle = fillStyle;\r\n        this.context.fillText( text,this.x,this.y);\r\n    }\r\n}"],"sourceRoot":""}