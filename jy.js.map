{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib.ts","webpack:///./src/sprite.ts","webpack:///./dev/game.ts","webpack:///./src/index.ts","webpack:///./src/jy.ts","webpack:///./src/control.ts","webpack:///./src/descript.ts","webpack:///./src/gameOver.ts","webpack:///./src/stage.ts","webpack:///./src/title.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","second","Promise","resolve","setTimeout","clearTimeout","stage","text","x","y","font","fillStyle","context","undefined","width","length","height","fillText","img","dx","dy","dWidth","dHeight","sx","sy","sWidth","sHeight","image","this","caches","args","Array","slice","arguments","unshift","console","log","drawImage","random","min","max","Math","floor","files","arr","k","test","push","wx","createImage","onload","src","audio","createInnerAudioContext","onCanplay","all","catch","then","url","play","SHAPE","imgSrc","type","rect","visible","draw","sp","spX","spY","e","callback","touch","touches","hits","clientX","clientY","canvas","createCanvas","Stage","title","Title","lib","write","descript","Descript","btn","Sprite","onTouchStart","touchHits","offTouchStart","Ball","speed","mygame","JY","frame","ballList","style","setState","STATE","running","forEach","ball","index","splice","clear","createSprite","update","w","h","waitMoment","resources","setup","Control","GameOver","titleStage","descriptStage","gameOverStage","controlStage","func","Function","ispause","interval","currentState","loading","loop","aniId","requestAnimationFrame","gameOver","window","cancelAnimationFrame","showGameOver","showLoading","loadResources","showTitle","showDescript","newGame","stageFunc","proxy","state","checkState","oA","oB","bx","by","bw","aw","bh","ah","circle","r2","oAc","getCenter","oBc","abs","moveRect","elemPosition","angle","elem","document","createElement","className","position","left","bottom","moveElem","appendChild","moveCenter","map","elemCenter","resetPos","bindEvent","toPosition","transPosition","top","addEventListener","event","epos","setPosition","offsetLeft","offsetTop","pageX","pageY","x1","y1","ang","atan2","sqrt","cos","sin","parentNode","removeChild","btntitle","textElem","innerHTML","innerText","getContext","fillRect","clearRect"],"mappings":"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","file":"jy.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import { Stage } from \".\";\r\n\r\nexport default {\r\n    /*\r\n    * 暂停一段时间\r\n    */\r\n    //暂停一段时间\r\n    async waitMoment(second: number) {\r\n        return new Promise(resolve => {\r\n            let t = setTimeout(() => {\r\n                clearTimeout(t)\r\n                resolve();\r\n            }, second)\r\n        })\r\n    },\r\n    //显示文字\r\n    write(stage: Stage, text: string, x?: number, y?: number, font: string = \"14px Arial\", fillStyle: string = '#000000') {\r\n        let context = stage.context;\r\n        context.font = font;\r\n        context.fillStyle = fillStyle;\r\n        if (x == undefined) {\r\n            x = (stage.width - text.length * 14) / 2;\r\n        }\r\n\r\n        if (y == undefined) {\r\n            y = stage.height / 2 - 15;\r\n        }\r\n\r\n        context.fillText(text, x, y)\r\n    },\r\n    //导入图片\r\n    draw(stage: Stage, img: string, dx: number, dy: number, dWidth?: number, dHeight?: number, sx?: number, sy?: number, sWidth?: number, sHeight?: number) {\r\n        let context = stage.context;\r\n        // let image = wx.createImage();\r\n        let image = this.caches[img];\r\n        let args = Array.prototype.slice.call(arguments, 2);\r\n        args.unshift(image);\r\n        console.log('draw',img)\r\n        // image.onload = ()=>{\r\n        //     context.drawImage.call(context,...args);\r\n        // } \r\n        // image.src = img;\r\n        context.drawImage.call(context, ...args);\r\n    },\r\n    //取区间数的随机值\r\n    random(min: number, max: number) {\r\n        return Math.floor(Math.random() * (max - min) + min);\r\n    },\r\n    caches: {},\r\n    loadResources(files) {\r\n        // let cache = {};\r\n        let arr = [];\r\n        return new Promise(resolve => {\r\n            for (let k in files) {\r\n                if (/\\.(jpg|gif|png|bmg|jpeg)/.test(files[k])) {\r\n                    //图片的预加载\r\n                    arr.push(new Promise(resolve => {\r\n                        let image = wx.createImage();\r\n                        image.onload = () => {\r\n                            this.caches[files[k]] = image;\r\n                            resolve();\r\n                        }\r\n                        image.src = files[k];\r\n                    })\r\n                    )\r\n                } else\r\n                    if (/\\.(mp3|wav|avi|m4a|aac)/.test(files[k])) {\r\n                        //音频\r\n                        arr.push(new Promise(resolve => {\r\n                            let audio = wx.createInnerAudioContext();\r\n                            audio.src = files[k];\r\n                            audio.onCanplay(() => {\r\n                                console.log(2222)\r\n                                this.caches[files[k]] = audio;\r\n                                resolve();\r\n                            })\r\n                        })\r\n                        )\r\n                    }\r\n            }\r\n            return Promise.all(arr).catch(() => {\r\n                console.log('加载资源出错.')\r\n            }).then(() => {\r\n                console.log('加载资源完成.')\r\n                resolve();\r\n            })\r\n        })\r\n    },\r\n    play(url) {\r\n        //播放声音\r\n        this.caches[url].play();\r\n    }\r\n}","import lib from \"./lib\";\r\nimport { Stage } from \".\";\r\n\r\n//sprite\r\n//形状\r\nexport enum SHAPE {\r\n    rect,\r\n    circle\r\n}\r\ninterface SP {\r\n    x: number,\r\n    y: number,\r\n    width: number,\r\n    height: number,\r\n    visible: boolean,\r\n    type: SHAPE\r\n}\r\n/**\r\n * 游戏基础的精灵类\r\n */\r\nexport default class Sprite implements SP {\r\n    width: number;\r\n    height: number;\r\n    x: number;\r\n    y: number;\r\n    visible: boolean;\r\n    type: SHAPE = SHAPE.rect;\r\n    r:number = 0 ;//半径\r\n    constructor(public stage: Stage, public imgSrc = '', width = 0, height = 0, x = 0, y = 0) {\r\n\r\n        this.width = width\r\n        this.height = height\r\n\r\n        this.x = x\r\n        this.y = y\r\n\r\n        this.visible = true\r\n    }\r\n\r\n    /**\r\n     * 将精灵图绘制在canvas上\r\n     */\r\n    draw() {\r\n        if (!this.visible)\r\n            return\r\n        lib.draw(\r\n            this.stage,\r\n            this.imgSrc,\r\n            this.x,\r\n            this.y,\r\n            this.width,\r\n            this.height\r\n        )\r\n    }\r\n\r\n    /**\r\n     * 简单的碰撞检测定义：\r\n     * 另一个精灵的中心点处于本精灵所在的矩形内即可\r\n     * @param{Sprite} sp: Sptite的实例\r\n     */\r\n    hits(sp: any) {\r\n        let spX = sp.x + sp.width / 2\r\n        let spY = sp.y + sp.height / 2\r\n\r\n        if (!this.visible || !sp.visible)\r\n            return false\r\n\r\n        return !!(spX >= this.x\r\n            && spX <= this.x + this.width\r\n            && spY >= this.y\r\n            && spY <= this.y + this.height)\r\n    }\r\n    touchHits(e, callback?: Function) {\r\n        let touch = e.touches[0];\r\n        if (this.hits({ x: touch.clientX, y: touch.clientY, width: 0, height: 0, visible: true })) {\r\n            callback && callback.call(this)\r\n        }\r\n    }\r\n    getCenter(){\r\n        //圆心位置\r\n        return [this.x +this.r,this.y +this.r];\r\n    }\r\n}\r\n","import {\r\n    JY,\r\n    STATE,\r\n    Stage,\r\n    Title,\r\n    Descript,\r\n    Sprite,\r\n    lib\r\n} from '../src/index';\r\n\r\nconst canvas = wx.createCanvas();\r\nconst [height, width] = [canvas.height, canvas.width]\r\n\r\n//创建舞台\r\nlet stage = new Stage(canvas, width, height, '#FFFFFF');\r\nlet title = new Title('打气球', stage);\r\ntitle.create = (resolve) => {\r\n    lib.write(stage, '一起来打气球')\r\n    resolve();\r\n}\r\nlet descript = new Descript(stage)\r\ndescript.create = async (resolve) => {\r\n    lib.draw(stage, 'images/descript.jpg', 0, 0, stage.width, stage.height)\r\n    // await lib.waitMoment(3000);\r\n    //添加开始按钮的Sprite\r\n    let btn = new Sprite(stage, 'images/btn-start.png', 100, 40, (width - 100) / 2, height - 40 - 40);\r\n    btn.draw();\r\n    wx.onTouchStart((e) => {\r\n        btn.touchHits(e,()=>{\r\n            wx.offTouchStart();\r\n            resolve()\r\n        })\r\n    });\r\n}\r\n//气球类\r\nclass Ball extends Sprite {\r\n    speed: number = 1;//速度\r\n    //更新位置\r\n    update() {\r\n        this.y -= this.speed;\r\n        if (this.y+this.height < 0) {\r\n            this.visible = false;\r\n        }\r\n    }\r\n}\r\nclass Game extends JY {\r\n    frame: number = 0;//帧数\r\n    ballList: Ball[] = [];//所有球的集合\r\n    newGame() {\r\n        this.stage.style = \"green\";\r\n        this.setState(STATE.running);\r\n        //事件绑定\r\n        wx.onTouchStart(e => {\r\n            let { clientX, clientY } = e;\r\n            console.log(clientX, clientY)\r\n            this.ballList.forEach((ball,index) => {\r\n                //触碰回收球并播放声音\r\n                ball.touchHits(e,()=>{\r\n                    this.ballList.splice(index,1);\r\n                    lib.play('audio/boom.mp3');\r\n                })\r\n            });\r\n        });\r\n    }\r\n    async running() {\r\n        this.frame++;\r\n        //先清空场景\r\n        this.stage.clear();\r\n        this.createSprite();\r\n        this.ballList.forEach((ball,index) => {\r\n            ball.update();\r\n            ball.draw();\r\n            //回收球\r\n            if(!ball.visible){\r\n                this.ballList.splice(index,1);\r\n            }\r\n        });\r\n    }\r\n    //创建角色\r\n    createSprite() {\r\n        //100帧创建一个角色\r\n        if (this.frame % 100 == 0) {\r\n            let x = lib.random(0, stage.width - 30);\r\n            let w = 40;\r\n            let h = 340 / 120 * w;\r\n            let ball = new Ball(this.stage, 'images/ball.png', w, h, x, this.stage.height);\r\n            // ball.touchHits(this.touch)\r\n            this.ballList.push(ball);\r\n        }\r\n    }\r\n    async gameOver() {\r\n        stage.clear();\r\n        lib.write(stage, '游戏结束！');\r\n        await lib.waitMoment(3000);\r\n        this.setState(STATE.descript);\r\n    }\r\n}\r\n\r\nlet mygame = new Game(stage, title, descript);\r\nmygame.resources = [\r\n    'images/ball.png',\r\n    'images/btn-start.png',\r\n    'images/descript.jpg',\r\n    'audio/boom.mp3'\r\n];\r\nmygame.setup()","import JY,{STATE} from './jy';\r\nimport Control from './control';\r\nimport Descript from './descript';\r\nimport GameOver from './gameOver';\r\nimport IScreen from './iScreen';\r\nimport Sprite from './sprite';\r\nimport Stage from './stage';\r\nimport Title from './title';\r\nimport lib from '../src/lib';\r\nexport {\r\n    JY,\r\n    lib,\r\n    STATE,\r\n    Control,\r\n    Descript,\r\n    GameOver,\r\n    IScreen,\r\n    Sprite,\r\n    Stage,\r\n    Title\r\n}","/*\r\n/// <reference path=\"sprite.ts\" />\r\n/// <reference path=\"title.ts\" />\r\n/// <reference path=\"descript.ts\" />\r\n/// <reference path=\"gameOver.ts\" />\r\n/// <reference path=\"stage.ts\" />\r\n/// <reference path=\"control.ts\" />\r\n*/\r\nimport Sprite, { SHAPE } from './sprite';\r\nimport Title from './title';\r\nimport Descript from './descript';\r\nimport GameOver from './gameOver';\r\nimport Stage from './stage';\r\nimport Control from './control';\r\nimport lib from './lib';\r\n\r\n//游戏主框架\r\nexport enum STATE {\r\n    loading,\r\n    title,\r\n    descript,\r\n    newGame,\r\n    running,\r\n    gameOver\r\n}\r\nexport default class JY {\r\n    private func: Function = new Function;\r\n    private timer: any;\r\n    private aniId: number;\r\n    private currentState: STATE;\r\n    private ispause: boolean = false;//是否处于暂停状态\r\n    protected interval: number = 10;\r\n    protected context: wx.CanvasContext;\r\n    resources:string[]=[];\r\n    constructor(public stage: Stage, public titleStage?: Title, public descriptStage?: Descript, public gameOverStage?: GameOver, public controlStage?: Control) {\r\n        this.context = stage.context;\r\n        // this.setup();\r\n    }\r\n    setup() {\r\n        this.stage.draw();\r\n        this.currentState = STATE.loading;\r\n        this.setState(STATE.loading);\r\n        this.loop();\r\n    }\r\n    // 实现游戏帧循环\r\n    async loop() {\r\n        if (!this.ispause) {\r\n            await this.func();\r\n        }\r\n        this.aniId = requestAnimationFrame(this.loop.bind(this));\r\n    }\r\n    createControl() {\r\n    }\r\n    //新的开始\r\n    protected newGame() {\r\n        //游戏开始，清空场景\r\n        //打开计时器\r\n        this.setState(STATE.running);\r\n    }\r\n    //结束 \r\n    protected over() {\r\n        this.setState(STATE.gameOver);\r\n    }\r\n    //暂停\r\n    protected pause() {\r\n        this.ispause = true;\r\n        window.cancelAnimationFrame(this.aniId);\r\n    }\r\n    //暂停后的继续\r\n    protected play() {\r\n        this.ispause = false;\r\n        this.loop();\r\n    }\r\n    //游戏结束\r\n    protected gameOver() {\r\n        //游戏结束\r\n        //清空场景，显示结果\r\n        console.log('gameOver');\r\n        this.stage.clear();\r\n        this.showGameOver();\r\n    }\r\n    //结束画面\r\n    async showGameOver() {\r\n        console.log('game  over...')\r\n        await lib.waitMoment(3000);\r\n    }\r\n    //游戏中的\r\n    running() {\r\n        console.log('running...')\r\n    }\r\n    async loading() {\r\n        console.log('loading....')\r\n        await this.showLoading();\r\n        console.log('loading end...')\r\n        this.setState(STATE.title)\r\n    }\r\n    showLoading() {\r\n        lib.write(this.stage, '正在加载中')\r\n        return lib.loadResources(this.resources)\r\n    }\r\n    async title() {\r\n        console.log('title....');\r\n        await this.showTitle();\r\n        this.setState(STATE.descript);\r\n    }\r\n    showTitle() {\r\n        // this.titleStage.create()\r\n        // return lib.waitMoment(3000);\r\n        return new Promise(resolve => {\r\n            this.titleStage.create(resolve);\r\n        });\r\n    }\r\n    async descript() {\r\n        console.log('descript...');\r\n        await this.showDescript();\r\n        this.setState(STATE.newGame);\r\n    }\r\n    showDescript() {\r\n        return new Promise(resolve => {\r\n            this.descriptStage.create(resolve);\r\n        });\r\n        // return lib.waitMoment(3000);\r\n    }\r\n    proxy(stageFunc: Function) {\r\n        this.stage.clear();\r\n        return stageFunc.bind(this);\r\n    }\r\n    //检查状态\r\n    checkState() {\r\n        switch (this.currentState) {\r\n            case STATE.loading:\r\n                this.func = this.proxy(this.loading);\r\n                break;\r\n            case STATE.title:\r\n                this.func = this.proxy(this.title);\r\n                break;\r\n            case STATE.descript:\r\n                this.func = this.proxy(this.descript);\r\n                break;\r\n            case STATE.newGame:\r\n                this.func = this.proxy(this.newGame);\r\n                break;\r\n            case STATE.running:\r\n                this.func = this.proxy(this.running);\r\n                break;\r\n            case STATE.gameOver:\r\n                this.func = this.proxy(this.gameOver);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    setState(state?: STATE) {\r\n        this.currentState = state;\r\n        this.checkState();\r\n        // this.func();\r\n    }\r\n    //碰撞检测\r\n    hits(oA: Sprite, oB: Sprite) {\r\n        var bx = false,\r\n            by = false;\r\n        if (oA.type == SHAPE.rect) {\r\n            var bw = oB.width;\r\n            var aw = oA.width;\r\n            var bh = oB.height;\r\n            var ah = oA.height;\r\n            if (oA.x > oB.x) {\r\n                bx = oA.x - oB.x < bw;\r\n            } else if (oA.x < oB.x) {\r\n                bx = oB.x - oA.x < aw;\r\n            } else {\r\n                bx = true;\r\n            };\r\n            if (oA.y > oB.y) {\r\n                by = oA.y - oB.y < bh;\r\n            } else if (oA.y < oB.y) {\r\n                by = oB.y - oA.y < ah;\r\n            } else {\r\n                by = true;\r\n            };\r\n            return (bx && by);\r\n        } else if (oA.type == SHAPE.circle) {\r\n            var r2 = oA.r + oB.r;\r\n            let oAc = oA.getCenter();\r\n            let oBc = oB.getCenter();\r\n            bx = Math.abs(oAc[0] - oBc[0]) < r2;\r\n            by = Math.abs(oAc[1] - oBc[1]) < r2;\r\n            return (bx && by);\r\n        }\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen';\r\n//操作界面\r\nexport default class Control implements IScreen {\r\n    elem: HTMLElement;\r\n    rect: Array<number> = [160, 160];\r\n    moveElem: HTMLElement;\r\n    moveRect: Array<Number> = [50, 50];\r\n    moveCenter: Array<any>;\r\n    elemCenter: Array<any>;\r\n    elemPosition: Array<Number> = [10, 10];\r\n    position: Array<any>;\r\n    toPosition:Array<number>;\r\n    private angle:number=0;//角度\r\n\r\n    create() {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = \"control\";\r\n        this.elem.style.position = 'absolute';\r\n        this.elem.style.width = this.rect[0] + 'px';\r\n        this.elem.style.height = this.rect[1] + 'px';\r\n        this.elem.style.left = this.elemPosition[0] + '%';\r\n        this.elem.style.bottom = this.elemPosition[1] + '%';\r\n        this.moveElem = document.createElement('div');\r\n        this.moveElem.className = 'move';\r\n        this.moveElem.style.position = 'absolute';\r\n        this.moveElem.style.width = this.moveRect[0] + 'px';\r\n        this.moveElem.style.height = this.moveRect[1] + 'px';\r\n        this.elem.appendChild(this.moveElem);\r\n        this.moveCenter = this.moveRect.map(function (d: number) { return d / 2 });\r\n        this.elemCenter = this.rect.map(function (d: number) { return d / 2 });\r\n        this.resetPos();\r\n        this.bindEvent();\r\n        return this.elem;\r\n    }\r\n    resetPos() {\r\n        //重置位置\r\n        // console.log(this.moveCenter)\r\n        this.toPosition = [0, 0];\r\n        this.transPosition();\r\n    }\r\n    //传入圆心转换成坐标,\r\n    transPosition() {\r\n        let x = (this.elemCenter[0] - this.moveCenter[0]) + this.toPosition[0];\r\n        let y = (this.elemCenter[1] - this.moveCenter[1]) - this.toPosition[1];\r\n        this.moveElem.style.left = x + 'px';\r\n        this.moveElem.style.top = y + 'px';\r\n\r\n    }\r\n    bindEvent() {\r\n        this.elem.addEventListener('touchstart', function (event:TouchEvent) {\r\n            let epos = event.touches[0] || event;\r\n            this.setPosition(epos)\r\n        }.bind(this), false);\r\n        this.elem.addEventListener('touchmove', function (event:TouchEvent) {\r\n            let epos = event.touches[0] || event;\r\n            this.setPosition(epos);\r\n        }.bind(this), false);\r\n        this.elem.addEventListener('touchend', function (event:TouchEvent) {\r\n            this.resetPos();\r\n        }.bind(this), false);\r\n    }\r\n    // 计算边界值,设置位置\r\n    setPosition(epos:Touch) {\r\n        this.position =  [this.elem.offsetLeft, this.elem.offsetTop];\r\n        let x: number = epos.pageX - this.position[0];\r\n        let y = epos.pageY - this.position[1];\r\n        // x= Math.min (x,this.rect[0]-this.moveCenter[0]);\r\n        // x = Math.max(x,this.moveCenter[0])\r\n        let x1 = (x - this.elemCenter[0]);//相对于圆点的位置\r\n        let y1 = -(y - this.elemCenter[1]);\r\n        console.log(x1, y1)\r\n        let ang = Math.atan2(y1, x1);\r\n        // this.angle = ang;\r\n        // console.log('角度：'+ang)\r\n        let c = Math.sqrt(x1 * x1 + y1 * y1);\r\n        let r = this.elemCenter[0] - this.moveCenter[0];//最长半径\r\n        if (c > r) {\r\n            // console.log('out', c)\r\n            let x2 = Math.cos(ang) * r;\r\n            let y2 = Math.sin(ang) * r;\r\n            //下面是另一种算法\r\n            // y2=y1*r/c;\r\n            // x2= x1*r/c;\r\n            // console.log('xy:', x1, y1)\r\n            // console.log('x2y2:',x2, y2)\r\n            x1 = x2;\r\n            y1 = y2;\r\n        }\r\n        this.toPosition = [x1, y1];\r\n        this.transPosition()\r\n    }\r\n    getAngle(){\r\n        // console.log(this.toPosition)\r\n        this.angle = Math.atan2(this.toPosition[1],this.toPosition[0]);\r\n        return this.angle;\r\n    }\r\n    //获取到角度\r\n    remove() {\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nimport { Stage } from '.';\r\n//描述设计\r\nexport default class Descript  implements  IScreen{\r\n    constructor(public stage:Stage) {\r\n        console.log(arguments)\r\n    }\r\n    create(resolve:Function) {\r\n       wx.onTouchStart(() => {\r\n            console.log('touch...')\r\n            wx.offTouchStart();\r\n            resolve()\r\n        })\r\n    }\r\n    remove(){\r\n        this.stage.clear();\r\n    }\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class GameOver implements IScreen {\r\n    elem: HTMLElement;\r\n    textElem: HTMLElement;\r\n    constructor(public btntitle: string) {\r\n\r\n    }\r\n    create(callback?: Function, text: string = '') {\r\n        this.elem = document.createElement('div');\r\n        this.elem.className = 'gameOver';\r\n        this.textElem = document.createElement('div');\r\n        this.textElem.className = 'text';\r\n        this.textElem.innerHTML = text;\r\n        this.elem.appendChild(this.textElem);\r\n        let btn = document.createElement('button');\r\n        btn.className = \"button\"\r\n        btn.innerText = this.btntitle;\r\n        btn.addEventListener('touchstart', function (event:TouchEvent) {\r\n            callback.call(this)\r\n        }.bind(this),false);\r\n        // btn.onclick = callback.bind(this);\r\n        this.elem.appendChild(btn)\r\n        return this.elem;\r\n    }\r\n    setText(text: string = '') {\r\n        this.textElem.innerHTML = text;\r\n    }\r\n    remove() {\r\n        this.elem.parentNode.removeChild(this.elem);\r\n    }\r\n\r\n}","//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nexport default class Stage {\r\n    context: wx.CanvasContext;\r\n    constructor(public canvas:wx.Canvas, public width: number, public height: number, public style?: string) {\r\n        this.context = canvas.getContext('2d');\r\n    }\r\n    draw(style?:string){\r\n        this.context.fillStyle=this.style;\r\n        this.context.fillRect(0,0,this.width,this.height)\r\n    }\r\n    //清空布景\r\n    clear(){\r\n        this.context.clearRect(0,0,this.width,this.height);\r\n        this.draw();\r\n    }\r\n}\r\n","//描述设计\r\n//// <reference path=\"iScreen.ts\" />\r\nimport IScreen from './iScreen'\r\nimport { Stage } from '.';\r\nimport lib from './lib';\r\n\r\nexport default class Title  implements  IScreen{\r\n    constructor(public title:string,private stage:Stage) {\r\n        // console.log(arguments)\r\n    }\r\n    create(resolve) {\r\n        lib.write(this.stage,this.title)\r\n        lib.waitMoment(3000);\r\n        resolve();\r\n    }\r\n    remove(){\r\n        this.stage.clear();\r\n    }\r\n}"],"sourceRoot":""}